<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeep Name Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Odibee+Sans&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
        }
        .tech-box {
            border-radius: 15px;
            border: 2px solid #000;
            background: linear-gradient(45deg, #2c2c2c, #4a4a4a);
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.7),
                0 0 15px rgba(100,181,246,0.8);
            padding: 2rem;
        }
        h1 {
            font-family: 'Odibee Sans', cursive;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .neon-button {
            background: linear-gradient(45deg, #00bcd4, #2196f3);
            border: 2px solid #000;
            color: white;
            padding: 12px 24px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
            transition: all 0.3s ease;
            border-radius: 10px;
            box-shadow: 
                inset 0 0 10px rgba(0,0,0,0.7),
                0 0 15px rgba(100,181,246,0.8);
            margin: 20px 0;
        }
        .neon-button:hover {
            box-shadow: 
                inset 0 0 15px rgba(0,0,0,0.8),
                0 0 20px rgba(100,181,246,1);
        }
        .input-field {
            background-color: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            background-color: rgba(255,255,255,0.2);
            border-color: #00bcd4;
            box-shadow: 0 0 10px rgba(0,188,212,0.5);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div id="app" class="w-full max-w-2xl">
        <div class="tech-box">
            <h1 class="text-5xl font-bold mb-6 text-center text-yellow-400">Jeep Name Generator</h1>
            
            <!-- Question Form -->
            <div v-if="currentStep === 'questions'">
                <h2 class="text-2xl font-semibold mb-6 text-center text-green-300">Tell us about your Jeep</h2>
                <form @submit.prevent="submitAnswers">
                    <div v-for="(question, index) in questions" :key="index" class="mb-4">
                        <label :for="'q'+index" class="block text-sm font-medium text-gray-300 mb-2">{{ question.text }}</label>
                        <input :id="'q'+index" v-model="answers[question.id]" type="text" class="input-field w-full px-3 py-2 rounded-md">
                    </div>
                    <button type="submit" class="neon-button w-full" :disabled="isLoading">
                        {{ isLoading ? 'Generating Names...' : 'Generate Names' }}
                    </button>
                </form>
            </div>

            <!-- Results Display -->
            <div v-if="currentStep === 'results'">
                <h2 class="text-2xl font-semibold mb-6 text-center text-green-300">Your Jeep Names</h2>
                <ul class="space-y-3">
                    <li v-for="(name, index) in generatedNames" :key="index" class="p-3 bg-gray-800 rounded-md text-center">
                        {{ name }}
                    </li>
                </ul>
                <button @click="resetForm" class="neon-button w-full">Start Over</button>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref } = Vue

        createApp({
            setup() {
                const currentStep = ref('questions')
                const questions = ref([
                    { id: 'model', text: 'What model of Jeep do you have?' },
                    { id: 'color', text: 'What color is your Jeep?' },
                    { id: 'location', text: 'Where do you mostly drive your Jeep?' },
                    { id: 'purpose', text: 'What\'s your Jeep\'s main purpose?' },
                    { id: 'modifications', text: 'Do you have any modifications on your Jeep?' },
                    { id: 'feature', text: 'What\'s your favorite feature of your Jeep?' },
                    { id: 'personality', text: 'If your Jeep had a personality, how would you describe it?' }
                ])
                const answers = ref({})
                const generatedNames = ref([])
                const isLoading = ref(false)

                const submitAnswers = async () => {
                    isLoading.value = true
                    try {
                        console.log('Sending request with data:', answers.value);
                        const response = await axios.post('http://localhost:3000/generate-names', answers.value)
                        console.log('Received response:', response.data);
                        generatedNames.value = response.data.names
                        currentStep.value = 'results'
                    } catch (error) {
                        console.error('Error generating names:', error.response ? error.response.data : error.message)
                        alert('An error occurred while generating names. Please check the console for more details.')
                    } finally {
                        isLoading.value = false
                    }
                }

                const resetForm = () => {
                    answers.value = {}
                    generatedNames.value = []
                    currentStep.value = 'questions'
                }

                return {
                    currentStep,
                    questions,
                    answers,
                    generatedNames,
                    isLoading,
                    submitAnswers,
                    resetForm
                }
            }
        }).mount('#app')
    </script>
</body>
</html>